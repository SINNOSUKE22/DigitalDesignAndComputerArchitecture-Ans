# 演習問題2.35

TRUEになるのは以下の入力の時

P: 2, 3, 5, 7, 11, 13
D: 0, 3, 6, 9, 12, 15

真理値表は以下の通り。

```
 A3 A2 A1 A0 | P D
-------------+-----
  0  0  0  0 | 0 1
  0  0  0  1 | 0 0
  0  0  1  0 | 1 0
  0  0  1  1 | 1 1
  0  1  0  0 | 0 0
  0  1  0  1 | 1 0
  0  1  1  0 | 0 1
  0  1  1  1 | 1 0
  1  0  0  0 | 0 0
  1  0  0  1 | 0 1
  1  0  1  0 | 0 0
  1  0  1  1 | 1 0
  1  1  0  0 | 0 1
  1  1  0  1 | 1 0
  1  1  1  0 | 0 0
  1  1  1  1 | 0 1
```

カルノーマップの順に並べ替えると、以下の通り

```
 A3 A2 A1 A0 | P D
-------------+-----
  0  0  0  0 | 0 1
  0  1  0  0 | 0 0
  1  1  0  0 | 0 1
  1  0  0  0 | 0 0
  
  0  0  0  1 | 0 0
  0  1  0  1 | 1 0
  1  0  0  1 | 0 1
  1  1  0  1 | 1 0

  0  0  1  1 | 1 1
  0  1  1  1 | 1 0
  1  0  1  1 | 1 0
  1  1  1  1 | 0 1
  
  0  0  1  0 | 1 0
  0  1  1  0 | 0 1
  1  0  1  0 | 0 0
  1  1  1  0 | 0 0
```

演習問題2.34と同様に、プログラムでカルノーマップを生成する。

```scheme
;; 真理値表を定義
(define truth-table
  '((("0000" 0 1)
     ("0100" 0 0)
     ("1100" 0 1)
     ("1000" 0 0))

    (("0001" 0 0)
     ("0101" 1 0)
     ("1001" 0 1)
     ("1101" 1 0))

    (("0011" 1 1)
     ("0111" 1 0)
     ("1011" 1 0)
     ("1111" 0 1))

    (("0010" 1 0)
     ("0110" 0 1)
     ("1010" 0 0)
     ("1110" 0 0))))

;; カルノーマップをPとDについて生成。
(define karnaugh-maps 
  (map (lambda (index)
	 (map (lambda (row)
		(map (lambda (col)
		       (list-ref col index))
		     row))
	      truth-table))
       '(1 2)))

;; カルノーマップを出力D
    | 00 | 01 | 11 | 10
----+----+----+----+----
 00 |  1 |  0 |  1 |  0 
 01 |  0 |  0 |  1 |  0 
 11 |  1 |  0 |  0 |  1 
 10 |  0 |  1 |  0 |  0 

(for-each (lambda (seg-name a-map)
	    (newline)
	    (display seg-name)
	    (newline)
	    (display "    | 00 | 01 | 11 | 10")
	    (newline)
	    (display "----+----+----+----+----")
	    (newline)
	    (for-each (lambda (head low)
			(display head)
			(for-each (lambda (col)
				    (format #t "|  ~A " col))
				  low)
			(newline))
		      '(" 00 " " 01 " " 11 " " 10 ")
		      a-map))
	  '("P" "D")
	  karnaugh-maps)
```

カルノーマップに囲みを作り、ブール論理式を記載する。

```
P
    | 00 | 01 | 11 | 10
----+----+----+----+----
 00 |  0 |  0 |  0 |  0 
    |  	 |+--+|	   |+--+
 01 |  0 || 1||  0 || 1|
    |+--+||+------+|+--+
 11 || 1||||1||  1||  0 
    ||	|||+------+|   
    ||	||+--+|	   |   	
 10 || 1||  0 |  0 |  0 
    |+--+|    |	   |   

P = A3~A2~A1A0 + ~A3A2A0 + ~A3~A2A1 + A2A1~A0

D	
    | 00 | 01 | 11 | 10
----+----+----+----+----
    |+--+|    |+--+|   	
 00 || 1||  0 || 1||  0 
    |+--+|    ||  ||   
 01 |  0 |  0 || 1||  0 
   -----+|    |+--+|+----
 11 |  1||  0 |  0 || 1  
   -----+|+--+|	   |+----
 10 |  0 || 1||  0 |  0 
       	  +--+

D = A3~A2~A1 + ~A3A2A1~A0 + ~A3~A2~A1~A0 + ~A2A1~A0
```
